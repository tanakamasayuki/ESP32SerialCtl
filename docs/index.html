<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ESP32 WebSerial Control</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
</head>

<body>
  <div class="page">
    <header class="topbar">
      <div class="app-title">
        <h1 data-i18n="header.title">ESP32 Serial Control</h1>
        <p data-i18n="header.subtitle">
          WebSerial を利用して ESP32 の標準コマンドとユーザー定義コマンドを管理する Web コンソールです。
        </p>
      </div>
      <div class="connection-panel">
        <div class="status-pill status-pill--disconnected">
          <span class="status-indicator"></span>
          <span id="connection-status-label" data-i18n="connection.status.disconnected">未接続</span>
        </div>
        <div class="connection-actions">
          <button class="btn btn-primary" id="connect-button" disabled data-i18n="connection.actions.connect">
            デバイスに接続
          </button>
          <button class="btn btn-secondary" id="disconnect-button" disabled data-i18n="connection.actions.disconnect">
            切断
          </button>
        </div>
        <div class="language-switcher">
          <label for="language-select" data-i18n="language.label">表示言語</label>
          <select id="language-select" data-i18n-aria-label="language.ariaLabel">
            <option value="en" data-i18n="language.option.en">English</option>
            <option value="ja" data-i18n="language.option.ja">日本語</option>
            <option value="zh" data-i18n="language.option.zh">中文</option>
          </select>
        </div>
      </div>
    </header>

    <main class="main-layout">
      <nav class="side-panel">
        <h2 data-i18n="nav.heading">操作グループ</h2>
        <ul class="tab-list" role="tablist">
          <li>
            <button class="tab-button is-active" role="tab" aria-selected="true" data-tab="system">
              <span class="tab-label" data-i18n="nav.tabs.system.label">システム</span>
              <span class="tab-desc" data-i18n="nav.tabs.system.desc">sys info / uptime / time / timezone / reset</span>
            </button>
          </li>
          <li>
            <button class="tab-button" role="tab" data-tab="wifi">
              <span class="tab-label" data-i18n="nav.tabs.wifi.label">Wi-Fi</span>
              <span class="tab-desc" data-i18n="nav.tabs.wifi.desc">wifi status / connect</span>
            </button>
          </li>
          <li>
            <button class="tab-button" role="tab" data-tab="config">
              <span class="tab-label" data-i18n="nav.tabs.config.label">コンフィグ</span>
              <span class="tab-desc" data-i18n="nav.tabs.config.desc">conf list / get / set / del</span>
            </button>
          </li>
          <li>
            <button class="tab-button" role="tab" data-tab="storage">
              <span class="tab-label" data-i18n="nav.tabs.storage.label">ストレージ</span>
              <span class="tab-desc" data-i18n="nav.tabs.storage.desc">storage list / use / status</span>
            </button>
          </li>
          <li>
            <button class="tab-button" role="tab" data-tab="filesystem">
              <span class="tab-label" data-i18n="nav.tabs.filesystem.label">ファイル操作</span>
              <span class="tab-desc" data-i18n="nav.tabs.filesystem.desc">fs ls / write / hash</span>
            </button>
          </li>
          <li>
            <button class="tab-button" role="tab" data-tab="peripherals">
              <span class="tab-label" data-i18n="nav.tabs.peripherals.label">ペリフェラル</span>
              <span class="tab-desc" data-i18n="nav.tabs.peripherals.desc">i2c / gpio / adc / pwm / rgb</span>
            </button>
          </li>
          <li>
            <button class="tab-button" role="tab" data-tab="help">
              <span class="tab-label" data-i18n="nav.tabs.help.label">ヘルプ</span>
              <span class="tab-desc" data-i18n="nav.tabs.help.desc">help / log</span>
            </button>
          </li>
        </ul>
      </nav>

      <section class="content-panel">
        <div class="tab-content is-active" id="tab-system" role="tabpanel">
          <header class="tab-header">
            <h2 data-i18n="sections.system.title">システムコマンド</h2>
            <p data-i18n="sections.system.description">
              ESP32 の動作状態の確認やシステム制御に関する標準コマンドとユーザー定義コマンドをまとめています。
            </p>
          </header>

          <div class="command-layout">
            <div class="command-tablist" role="tablist" aria-label="システムコマンド"
              data-i18n-aria-label="sections.system.ariaTablist">
              <button id="tab-system-sys-info" class="command-tab is-active" role="tab" aria-selected="true"
                data-command="sys-info" aria-controls="command-system-sys-info">
                sys info
              </button>
              <button id="tab-system-sys-mem" class="command-tab" role="tab" aria-selected="false"
                data-command="sys-mem" aria-controls="command-system-sys-mem">
                sys mem
              </button>
              <button id="tab-system-sys-uptime" class="command-tab" role="tab" aria-selected="false"
                data-command="sys-uptime" aria-controls="command-system-sys-uptime">
                sys uptime
              </button>
              <button id="tab-system-sys-timezone" class="command-tab" role="tab" aria-selected="false"
                data-command="sys-timezone" aria-controls="command-system-sys-timezone">
                sys timezone
              </button>
              <button id="tab-system-sys-time" class="command-tab" role="tab" aria-selected="false"
                data-command="sys-time" aria-controls="command-system-sys-time">
                sys time
              </button>
              <button id="tab-system-sys-reset" class="command-tab" role="tab" aria-selected="false"
                data-command="sys-reset" aria-controls="command-system-sys-reset">
                sys reset
              </button>
            </div>

            <article class="card command-panel is-active" id="command-system-sys-info" data-command="sys-info"
              data-auto-fetch="true" role="tabpanel" aria-labelledby="tab-system-sys-info">
              <h3>sys info</h3>
              <p data-i18n="commands.system.sys-info.description">
                チップモデル、リビジョン、クロック、SDK/IDF バージョンなどを取得します。
              </p>
              <div class="card-actions">
                <button class="btn btn-outline" disabled data-i18n="commands.system.sys-info.action">sys info
                  を送信</button>
              </div>
              <div class="result-section" data-result="sys-info">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latest">最新結果 (自動取得)</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-system-sys-uptime" data-command="sys-uptime"
              data-auto-fetch="true" role="tabpanel" aria-labelledby="tab-system-sys-uptime">
              <h3>sys uptime</h3>
              <p data-i18n="commands.system.sys-uptime.description">
                起動からの経過時間を hh:mm:ss とミリ秒で表示します。
              </p>
              <div class="card-actions">
                <button class="btn btn-outline" disabled data-i18n="commands.system.sys-uptime.action">
                  sys uptime を送信
                </button>
              </div>
              <div class="result-section" data-result="sys-uptime">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latest">最新結果 (自動取得)</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">
                    結果がここに表示されます
                  </pre>
              </div>
            </article>

            <article class="card command-panel" id="command-system-sys-timezone" data-command="sys-timezone"
              data-auto-fetch="true" role="tabpanel" aria-labelledby="tab-system-sys-timezone">
              <h3>sys timezone [tz]</h3>
              <p data-i18n="commands.system.sys-timezone.description">
                永続化されたタイムゾーンを取得・設定します。NTP 同期でも利用されるため、先に設定してください。
              </p>
              <div class="form-field">
                <label for="sys-timezone-input" data-i18n="commands.system.sys-timezone.field.label">タイムゾーン (例:
                  JST-9)</label>
                <input id="sys-timezone-input" type="text" placeholder="JST-9"
                  data-i18n-placeholder="commands.system.sys-timezone.field.placeholder" />
              </div>
              <div class="card-actions">
                <button class="btn btn-outline" type="button" id="sys-timezone-get"
                  data-i18n="commands.system.sys-timezone.actions.get">
                  タイムゾーンを取得
                </button>
                <button class="btn btn-primary" type="button" id="sys-timezone-set"
                  data-i18n="commands.system.sys-timezone.actions.set">
                  タイムゾーンを設定
                </button>
                <button class="btn btn-secondary" type="button" id="sys-timezone-use-browser" data-system-utility="true"
                  data-i18n="commands.system.sys-timezone.actions.useBrowser">
                  ブラウザタイムゾーンを入力
                </button>
              </div>
              <div class="result-section" data-result="sys-timezone">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latest">最新結果 (自動取得)</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-system-sys-time" data-command="sys-time"
              data-auto-fetch="true" role="tabpanel" aria-labelledby="tab-system-sys-time">
              <h3>sys time [datetime]</h3>
              <p data-i18n="commands.system.sys-time.description">
                現在時刻を ISO 8601 形式で取得・設定します。RTC やタイムゾーンの確認に利用できます。
              </p>
              <div class="form-field">
                <label for="sys-time-input" data-i18n="commands.system.sys-time.field.label">日時
                  (YYYY-MM-DDTHH:MM:SS)</label>
                <input id="sys-time-input" type="text" placeholder="2024-01-01T12:34:56"
                  data-i18n-placeholder="commands.system.sys-time.field.placeholder" />
              </div>
              <div class="card-actions">
                <button class="btn btn-outline" type="button" id="sys-time-get"
                  data-i18n="commands.system.sys-time.actions.get">
                  現在時刻を取得
                </button>
                <button class="btn btn-primary" type="button" id="sys-time-set"
                  data-i18n="commands.system.sys-time.actions.set">
                  指定時刻を設定
                </button>
                <button class="btn btn-secondary" type="button" id="sys-time-use-browser" data-system-utility="true"
                  data-i18n="commands.system.sys-time.actions.useBrowser">
                  ブラウザ時刻を入力
                </button>
              </div>
              <div class="result-section" data-result="sys-time">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latest">最新結果 (自動取得)</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-system-sys-mem" data-command="sys-mem"
              data-auto-fetch="true" role="tabpanel" aria-labelledby="tab-system-sys-mem">
              <h3>sys mem</h3>
              <p data-i18n="commands.system.sys-mem.description">
                ヒープおよび PSRAM の総量・空き・最小値・最大ブロックを確認します。
              </p>
              <div class="card-actions">
                <button class="btn btn-outline" disabled data-i18n="commands.system.sys-mem.action">sys mem を送信</button>
              </div>
              <div class="result-section" data-result="sys-mem">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latest">最新結果 (自動取得)</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-system-sys-reset" data-command="sys-reset" role="tabpanel"
              aria-labelledby="tab-system-sys-reset">
              <h3>sys reset</h3>
              <p data-i18n="commands.system.sys-reset.description">
                ESP32 をソフトリセットします。
              </p>
              <div class="card-actions">
                <button class="btn btn-danger" disabled data-i18n="commands.system.sys-reset.action">sys reset
                  を送信</button>
              </div>
            </article>
          </div>
        </div>

        <div class="tab-content" id="tab-wifi" role="tabpanel">
          <header class="tab-header">
            <h2 data-i18n="sections.wifi.title">Wi-Fi コマンド</h2>
            <p data-i18n="sections.wifi.description">
              Wi-Fi 接続の状態確認や登録済みアクセスポイントの管理、自動接続設定を行います。
            </p>
          </header>

          <div class="command-layout">
            <div class="command-tablist" role="tablist" aria-label="Wi-Fiコマンド"
              data-i18n-aria-label="sections.wifi.ariaTablist">
              <button id="tab-wifi-status" class="command-tab is-active" role="tab" aria-selected="true"
                data-command="wifi-status" aria-controls="command-wifi-status">
                wifi status
              </button>
              <button id="tab-wifi-list" class="command-tab" role="tab" aria-selected="false" data-command="wifi-list"
                aria-controls="command-wifi-list">
                wifi list
              </button>
              <button id="tab-wifi-add" class="command-tab" role="tab" aria-selected="false" data-command="wifi-add"
                aria-controls="command-wifi-add">
                wifi add
              </button>
              <button id="tab-wifi-del" class="command-tab" role="tab" aria-selected="false" data-command="wifi-del"
                aria-controls="command-wifi-del">
                wifi del
              </button>
              <button id="tab-wifi-auto" class="command-tab" role="tab" aria-selected="false" data-command="wifi-auto"
                aria-controls="command-wifi-auto">
                wifi auto
              </button>
              <button id="tab-wifi-connect" class="command-tab" role="tab" aria-selected="false"
                data-command="wifi-connect" aria-controls="command-wifi-connect">
                wifi connect
              </button>
              <button id="tab-wifi-disconnect" class="command-tab" role="tab" aria-selected="false"
                data-command="wifi-disconnect" aria-controls="command-wifi-disconnect">
                wifi disconnect
              </button>
              <button id="tab-wifi-ntp-status" class="command-tab" role="tab" aria-selected="false"
                data-command="ntp-status" aria-controls="command-wifi-ntp-status">
                ntp status
              </button>
              <button id="tab-wifi-ntp-set" class="command-tab" role="tab" aria-selected="false" data-command="ntp-set"
                aria-controls="command-wifi-ntp-set">
                ntp set
              </button>
              <button id="tab-wifi-ntp-enable" class="command-tab" role="tab" aria-selected="false"
                data-command="ntp-enable" aria-controls="command-wifi-ntp-enable">
                ntp enable
              </button>
              <button id="tab-wifi-ntp-disable" class="command-tab" role="tab" aria-selected="false"
                data-command="ntp-disable" aria-controls="command-wifi-ntp-disable">
                ntp disable
              </button>
              <button id="tab-wifi-ntp-auto" class="command-tab" role="tab" aria-selected="false"
                data-command="ntp-auto" aria-controls="command-wifi-ntp-auto">
                ntp auto
              </button>
            </div>

            <article class="card command-panel is-active" id="command-wifi-status" data-command="wifi-status"
              data-auto-fetch="true" role="tabpanel" aria-labelledby="tab-wifi-status">
              <h3>wifi status</h3>
              <p data-i18n="commands.wifi.status.description">
                現在の Wi-Fi 接続状態や MAC/IP アドレス、RSSI などを表示します。
              </p>
              <div class="card-actions">
                <button class="btn btn-outline" type="button" data-i18n="commands.wifi.status.actions.run">
                  wifi status を送信
                </button>
              </div>
              <div class="result-section" data-result="wifi-status">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latest">最新結果 (自動取得)</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-wifi-list" data-command="wifi-list" data-auto-fetch="true"
              role="tabpanel" aria-labelledby="tab-wifi-list">
              <h3>wifi list</h3>
              <p data-i18n="commands.wifi.list.description">
                NVS に保存されているアクセスポイントの一覧を表示します。
              </p>
              <div class="card-actions">
                <button class="btn btn-outline" type="button" data-i18n="commands.wifi.list.actions.run">
                  wifi list を送信
                </button>
              </div>
              <div class="result-section" data-result="wifi-list">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latest">最新結果 (自動取得)</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-wifi-add" data-command="wifi-add" role="tabpanel"
              aria-labelledby="tab-wifi-add">
              <h3>wifi add &lt;ssid&gt; &lt;key&gt;</h3>
              <p data-i18n="commands.wifi.add.description">
                新しいアクセスポイントの SSID とパスワードを NVS に登録します (最大 8 件)。
              </p>
              <div class="form-field">
                <label for="wifi-add-ssid" data-i18n="commands.wifi.add.fields.ssid.label">SSID</label>
                <input id="wifi-add-ssid" type="text" placeholder="MyWiFi"
                  data-i18n-placeholder="commands.wifi.add.fields.ssid.placeholder" />
              </div>
              <div class="form-field">
                <label for="wifi-add-key" data-i18n="commands.wifi.add.fields.key.label">パスワード</label>
                <input id="wifi-add-key" type="text" placeholder=""
                  data-i18n-placeholder="commands.wifi.add.fields.key.placeholder" />
              </div>
              <div class="card-actions">
                <button class="btn btn-primary" type="button" id="wifi-add-run" data-system-utility="true"
                  data-i18n="commands.wifi.add.actions.run">
                  wifi add を送信
                </button>
              </div>
              <div class="result-section" data-result="wifi-add">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latestManual">最新結果</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-wifi-del" data-command="wifi-del" role="tabpanel"
              aria-labelledby="tab-wifi-del">
              <h3>wifi del &lt;index&gt;</h3>
              <p data-i18n="commands.wifi.del.description">
                wifi list で表示されたインデックスの登録情報を削除します。
              </p>
              <div class="form-field">
                <label for="wifi-del-index" data-i18n="commands.wifi.del.fields.index.label">インデックス</label>
                <input id="wifi-del-index" type="number" min="0" placeholder="0"
                  data-i18n-placeholder="commands.wifi.del.fields.index.placeholder" />
              </div>
              <div class="card-actions">
                <button class="btn btn-primary" type="button" id="wifi-del-run" data-system-utility="true"
                  data-i18n="commands.wifi.del.actions.run">
                  wifi del を送信
                </button>
              </div>
              <div class="result-section" data-result="wifi-del">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latestManual">最新結果</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-wifi-auto" data-command="wifi-auto" role="tabpanel"
              aria-labelledby="tab-wifi-auto">
              <h3>wifi auto &lt;on|off&gt;</h3>
              <p data-i18n="commands.wifi.auto.description">
                起動時に登録済みネットワークへ自動接続するかを切り替えます。
              </p>
              <div class="form-field">
                <label for="wifi-auto-select" data-i18n="commands.wifi.auto.fields.mode.label">自動接続設定</label>
                <select id="wifi-auto-select">
                  <option value="on" data-i18n="commands.wifi.auto.fields.mode.optionOn">on</option>
                  <option value="off" data-i18n="commands.wifi.auto.fields.mode.optionOff">off</option>
                </select>
              </div>
              <div class="card-actions">
                <button class="btn btn-primary" type="button" id="wifi-auto-run" data-system-utility="true"
                  data-i18n="commands.wifi.auto.actions.run">
                  wifi auto を送信
                </button>
              </div>
              <div class="result-section" data-result="wifi-auto">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latestManual">最新結果</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-wifi-connect" data-command="wifi-connect" role="tabpanel"
              aria-labelledby="tab-wifi-connect">
              <h3>wifi connect [ssid] [key]</h3>
              <p data-i18n="commands.wifi.connect.description">
                登録済みネットワーク、または指定した SSID/鍵で Wi-Fi に接続します。
              </p>
              <div class="form-field">
                <label for="wifi-connect-ssid" data-i18n="commands.wifi.connect.fields.ssid.label">SSID (任意)</label>
                <input id="wifi-connect-ssid" type="text" placeholder=""
                  data-i18n-placeholder="commands.wifi.connect.fields.ssid.placeholder" />
              </div>
              <div class="form-field">
                <label for="wifi-connect-key" data-i18n="commands.wifi.connect.fields.key.label">パスワード (任意)</label>
                <input id="wifi-connect-key" type="text" placeholder=""
                  data-i18n-placeholder="commands.wifi.connect.fields.key.placeholder" />
              </div>
              <div class="card-actions">
                <button class="btn btn-primary" type="button" id="wifi-connect-run" data-system-utility="true"
                  data-i18n="commands.wifi.connect.actions.run">
                  wifi connect を送信
                </button>
              </div>
              <div class="result-section" data-result="wifi-connect">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latestManual">最新結果</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-wifi-disconnect" data-command="wifi-disconnect"
              role="tabpanel" aria-labelledby="tab-wifi-disconnect">
              <h3>wifi disconnect</h3>
              <p data-i18n="commands.wifi.disconnect.description">
                現在の Wi-Fi 接続を切断します。
              </p>
              <div class="card-actions">
                <button class="btn btn-outline" type="button" data-i18n="commands.wifi.disconnect.actions.run">
                  wifi disconnect を送信
                </button>
              </div>
              <div class="result-section" data-result="wifi-disconnect">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latestManual">最新結果</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-wifi-ntp-status" data-command="ntp-status"
              data-auto-fetch="true" role="tabpanel" aria-labelledby="tab-wifi-ntp-status">
              <h3>ntp status</h3>
              <p data-i18n="commands.wifi.ntp.status.description">
                NTP の自動設定や同期状態、利用中のサーバーを表示します。利用前に sys timezone を先に設定してください。
              </p>
              <div class="card-actions">
                <button class="btn btn-outline" type="button" data-i18n="commands.wifi.ntp.status.actions.run">
                  ntp status を送信
                </button>
              </div>
              <div class="result-section" data-result="ntp-status">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latest">最新結果 (自動取得)</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-wifi-ntp-set" data-command="ntp-set" role="tabpanel"
              aria-labelledby="tab-wifi-ntp-set">
              <h3>ntp set &lt;server&gt; [server2] [server3]</h3>
              <p data-i18n="commands.wifi.ntp.set.description">
                NTP サーバーを最大 3 台まで登録します。sys timezone を先に設定してください。
              </p>
              <div class="form-field">
                <label for="ntp-set-server1" data-i18n="commands.wifi.ntp.set.fields.server1.label">サーバー 1</label>
                <input id="ntp-set-server1" type="text" placeholder="pool.ntp.org"
                  data-i18n-placeholder="commands.wifi.ntp.set.fields.server1.placeholder" />
              </div>
              <div class="form-field">
                <label for="ntp-set-server2" data-i18n="commands.wifi.ntp.set.fields.server2.label">サーバー 2
                  (任意)</label>
                <input id="ntp-set-server2" type="text" placeholder=""
                  data-i18n-placeholder="commands.wifi.ntp.set.fields.server2.placeholder" />
              </div>
              <div class="form-field">
                <label for="ntp-set-server3" data-i18n="commands.wifi.ntp.set.fields.server3.label">サーバー 3
                  (任意)</label>
                <input id="ntp-set-server3" type="text" placeholder=""
                  data-i18n-placeholder="commands.wifi.ntp.set.fields.server3.placeholder" />
              </div>
              <div class="card-actions">
                <button class="btn btn-primary" type="button" id="ntp-set-run" data-system-utility="true"
                  data-i18n="commands.wifi.ntp.set.actions.run">
                  ntp set を送信
                </button>
              </div>
              <div class="result-section" data-result="ntp-set">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latestManual">最新結果</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-wifi-ntp-enable" data-command="ntp-enable" role="tabpanel"
              aria-labelledby="tab-wifi-ntp-enable">
              <h3>ntp enable</h3>
              <p data-i18n="commands.wifi.ntp.enable.description">
                NTP 同期を開始します。事前に sys timezone でタイムゾーンを設定し、Wi-Fi に接続してください。
              </p>
              <div class="card-actions">
                <button class="btn btn-primary" type="button" id="ntp-enable-run" data-system-utility="true"
                  data-i18n="commands.wifi.ntp.enable.actions.run">
                  ntp enable を送信
                </button>
              </div>
              <div class="result-section" data-result="ntp-enable">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latestManual">最新結果</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-wifi-ntp-disable" data-command="ntp-disable" role="tabpanel"
              aria-labelledby="tab-wifi-ntp-disable">
              <h3>ntp disable</h3>
              <p data-i18n="commands.wifi.ntp.disable.description">
                NTP 同期を停止します。
              </p>
              <div class="card-actions">
                <button class="btn btn-outline" type="button" id="ntp-disable-run" data-system-utility="true"
                  data-i18n="commands.wifi.ntp.disable.actions.run">
                  ntp disable を送信
                </button>
              </div>
              <div class="result-section" data-result="ntp-disable">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latestManual">最新結果</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-wifi-ntp-auto" data-command="ntp-auto" role="tabpanel"
              aria-labelledby="tab-wifi-ntp-auto">
              <h3>ntp auto &lt;on|off&gt;</h3>
              <p data-i18n="commands.wifi.ntp.auto.description">
                起動時に NTP を自動設定するかを切り替えます。sys timezone を設定済みであることを確認してください。
              </p>
              <div class="form-field">
                <label for="ntp-auto-select" data-i18n="commands.wifi.ntp.auto.fields.mode.label">自動設定</label>
                <select id="ntp-auto-select">
                  <option value="on" data-i18n="commands.wifi.ntp.auto.fields.mode.optionOn">on</option>
                  <option value="off" data-i18n="commands.wifi.ntp.auto.fields.mode.optionOff">off</option>
                </select>
              </div>
              <div class="card-actions">
                <button class="btn btn-primary" type="button" id="ntp-auto-run" data-system-utility="true"
                  data-i18n="commands.wifi.ntp.auto.actions.run">
                  ntp auto を送信
                </button>
              </div>
              <div class="result-section" data-result="ntp-auto">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latestManual">最新結果</span>
                  <span class="result-timestamp" data-result-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-result-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-result-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>
          </div>
        </div>

        <div class="tab-content" id="tab-config" role="tabpanel">
          <header class="tab-header">
            <h2 data-i18n="sections.config.title">アプリ設定</h2>
            <p data-i18n="sections.config.description">
              conf list で取得したアプリ設定を一覧表示し、個別に編集・既定値へ戻す操作を行えます。
            </p>
          </header>

          <div class="config-actions">
            <button class="btn btn-outline" type="button" id="config-refresh-button"
              data-i18n="sections.config.actions.refresh">最新の設定を取得</button>
          </div>

          <div class="config-table-wrapper" id="config-table-wrapper">
            <div class="config-table" id="config-table" role="table">
              <div class="config-row config-header" role="row">
                <div class="config-cell" role="columnheader" data-i18n="sections.config.table.name">設定名</div>
                <div class="config-cell" role="columnheader" data-i18n="sections.config.table.value">値</div>
                <div class="config-cell" role="columnheader" data-i18n="sections.config.table.description">説明</div>
                <div class="config-cell" role="columnheader" data-i18n="sections.config.table.actions">操作</div>
              </div>
              <div id="config-table-body"></div>
            </div>
            <p class="config-empty" id="config-empty-state" hidden data-i18n="sections.config.empty">
              設定が見つかりません。取得ボタンを押してください。</p>
          </div>
        </div>

        <div class="tab-content" id="tab-storage" role="tabpanel">
          <header class="tab-header">
            <h2 data-i18n="sections.storage.title">ストレージコマンド</h2>
            <p data-i18n="sections.storage.description">
              接続されたストレージデバイスの管理と切り替えに利用します。
            </p>
          </header>

          <div class="storage-layout">
            <article class="card storage-card" id="storage-list-card">
              <h3 data-i18n="storage.list.title">ストレージ一覧</h3>
              <p data-i18n-html="storage.list.description">
                タブを開くと自動で <code>storage list</code> を実行します。
              </p>
              <div class="storage-actions">
                <label for="storage-select" data-i18n="storage.list.selectorLabel">選択可能なストレージ</label>
                <select id="storage-select" disabled data-i18n-title="storage.list.selectorTitle">
                  <option value="" data-i18n="storage.list.selectorEmpty">マウント済みのストレージがありません</option>
                </select>
                <small data-i18n-html="storage.list.selectorHint">
                  選択すると <code>storage use</code> を送信し、一覧とステータスを更新します。
                </small>
              </div>
              <div class="result-section" data-storage="list">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latest">最新結果 (自動取得)</span>
                  <span class="result-timestamp" data-storage-list-timestamp>--:--</span>
                </header>
                <table class="data-table" data-storage-list-table>
                  <thead>
                    <tr>
                      <th data-i18n="storage.list.table.name">名前</th>
                      <th data-i18n="storage.list.table.type">種類</th>
                      <th data-i18n="storage.list.table.state">状態</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-storage-list-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card storage-card" id="storage-status-card">
              <h3 data-i18n="storage.status.title">ストレージステータス</h3>
              <p data-i18n-html="storage.status.description">
                <code>storage status</code> の最新結果を表示します。
              </p>
              <div class="result-section" data-storage="status">
                <header class="result-header">
                  <span class="result-title" data-i18n="results.latest">最新結果 (自動取得)</span>
                  <span class="result-timestamp" data-storage-status-timestamp>--:--</span>
                </header>
                <table class="kv-table" data-storage-status-table hidden>
                  <tbody></tbody>
                </table>
                <pre class="result-raw" data-storage-status-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>
          </div>
        </div>

        <div class="tab-content" id="tab-filesystem" role="tabpanel">
          <header class="tab-header">
            <h2 data-i18n="sections.filesystem.title">ファイル操作コマンド</h2>
            <p data-i18n-html="sections.filesystem.description">
              <code>fs</code> 系のコマンドをカテゴリ別に整理しています。
            </p>
          </header>

          <div class="filesystem-layout">
            <article class="card fs-card" id="fs-list-card">
              <h3 data-i18n="filesystem.list.title">ファイル一覧</h3>
              <p data-i18n-html="filesystem.list.description">
                現在のストレージを対象に <code>fs ls</code> を再帰的に実行して構造を表示します。
              </p>
              <div class="fs-list-header">
                <div>
                  <strong data-i18n="filesystem.list.stepsTitle">手順</strong>
                  <ol class="fs-steps" data-i18n-html="filesystem.list.steps">
                    <li>ストレージを選択すると自動で最新の一覧を取得します。</li>
                    <li>ディレクトリは展開して中身を確認できます。</li>
                    <li>ファイルまたはディレクトリをクリックすると右側に詳細が表示されます。</li>
                  </ol>
                </div>
              </div>
              <div class="result-section" data-fs="list">
                <header class="result-header">
                  <div class="result-header-info">
                    <span class="result-title" data-i18n="results.latest">最新結果 (自動取得)</span>
                    <span class="result-timestamp" data-fs-list-timestamp>--:--</span>
                  </div>
                  <button class="btn btn-outline" id="fs-list-refresh-button" disabled
                    data-i18n="filesystem.list.refresh">一覧を更新</button>
                </header>
                <div class="fs-tree" data-fs-tree>
                  <p class="fs-empty" data-fs-empty data-i18n="filesystem.messages.selectStorage">
                    ストレージタブで対象を選択してください。
                  </p>
                </div>
                <pre class="result-raw" data-fs-list-raw data-i18n="results.placeholder">結果がここに表示されます</pre>
              </div>
            </article>

            <article class="card fs-card" id="fs-detail-card">
              <h3 data-i18n="filesystem.detail.title">詳細と追加操作</h3>
              <p data-fs-info-message data-i18n="filesystem.messages.noDetail">
                ファイルまたはディレクトリを選択すると詳細が表示されます。
              </p>

              <div class="fs-detail-section">
                <h4 data-i18n="filesystem.detail.selectedPathTitle">選択中のパス</h4>
                <p class="fs-selected-path" data-fs-selected-path>--</p>
                <table class="kv-table" data-fs-detail-table hidden>
                  <tbody></tbody>
                </table>
              </div>

              <div class="fs-detail-section" data-fs-dir-section hidden>
                <h4 data-i18n="filesystem.detail.dirTitle">fs ls (ディレクトリ)</h4>
                <pre class="result-raw" data-fs-dir-raw
                  data-i18n="filesystem.messages.dirPlaceholder">ディレクトリの内容がここに表示されます</pre>
              </div>

              <div class="fs-detail-section" data-fs-cat-section hidden>
                <h4 data-i18n="filesystem.detail.catTitle">fs cat</h4>
                <pre class="result-raw" data-fs-cat-raw
                  data-i18n="filesystem.messages.catPlaceholder">ファイル内容がここに表示されます</pre>
              </div>

              <div class="fs-detail-section" data-fs-preview-section hidden>
                <h4 data-i18n="filesystem.detail.previewTitle">プレビュー</h4>
                <div class="fs-preview" data-fs-preview>
                  <p class="fs-empty" data-fs-preview-empty data-i18n="filesystem.messages.previewPlaceholder">
                    プレビュー可能なデータがありません。fs cat または fs b64read の結果を待っています。
                  </p>
                  <pre class="result-raw fs-preview-text" data-fs-preview-text hidden></pre>
                  <img class="fs-preview-image" data-fs-preview-image alt="" hidden />
                </div>
                <div class="card-actions fs-preview-actions" data-fs-preview-actions hidden>
                  <button class="btn btn-outline" id="fs-preview-fetch" type="button" disabled
                    data-i18n="filesystem.actions.preview.run">プレビューを取得</button>
                </div>
              </div>

              <div class="fs-detail-section" data-fs-b64-section hidden>
                <h4 data-i18n="filesystem.detail.b64Title">fs b64read</h4>
                <pre class="result-raw" data-fs-b64-raw
                  data-i18n="filesystem.messages.b64Placeholder">Base64 形式の読み出し結果がここに表示されます</pre>
              </div>

              <div class="fs-detail-section" data-fs-hash-section hidden>
                <h4 data-i18n="filesystem.detail.hashTitle">fs hash</h4>
                <pre class="result-raw" data-fs-hash-raw
                  data-i18n="filesystem.messages.hashPlaceholder">ハッシュ結果がここに表示されます</pre>
              </div>

              <div class="fs-detail-section" data-fs-action-section="mkdir" hidden>
                <h4 data-i18n="filesystem.actions.mkdir.title">ディレクトリを追加 (fs mkdir)</h4>
                <div class="form-field">
                  <label for="fs-mkdir-path" data-i18n="filesystem.actions.mkdir.pathLabel">ディレクトリ名</label>
                  <input id="fs-mkdir-path" type="text" placeholder="logs" disabled
                    data-i18n-placeholder="filesystem.actions.mkdir.pathPlaceholder" />
                </div>
                <div class="card-actions">
                  <button class="btn btn-primary" id="fs-mkdir-run" disabled
                    data-i18n="filesystem.actions.mkdir.action">fs mkdir
                    を送信</button>
                </div>
              </div>

              <div class="fs-detail-section" data-fs-action-section="write" hidden>
                <h4 data-i18n="filesystem.actions.write.title">テキストファイルを追加 (fs write)</h4>
                <div class="form-field">
                  <label for="fs-write-path" data-i18n="filesystem.actions.write.pathLabel">ファイル名</label>
                  <input id="fs-write-path" type="text" placeholder="notes.txt" disabled
                    data-i18n-placeholder="filesystem.actions.write.pathPlaceholder" />
                </div>
                <div class="form-field">
                  <label for="fs-write-content" data-i18n="filesystem.actions.write.contentLabel">内容 (短いテキスト向け)</label>
                  <input id="fs-write-content" type="text" placeholder="hello" disabled
                    data-i18n-placeholder="filesystem.actions.write.contentPlaceholder" />
                </div>
                <div class="card-actions">
                  <button class="btn btn-primary" id="fs-write-run" disabled
                    data-i18n="filesystem.actions.write.action">fs write
                    を送信</button>
                </div>
              </div>

              <div class="fs-detail-section" data-fs-action-section="b64write" hidden>
                <h4 data-i18n="filesystem.actions.b64write.title">ファイルをアップロード (fs b64write)</h4>
                <div class="fs-b64write-uploader">
                  <input id="fs-b64write-file" type="file" hidden />
                  <div class="fs-b64write-dropzone" data-fs-b64write-dropzone tabindex="-1" aria-disabled="true">
                    <p data-i18n="filesystem.actions.b64write.dropHint">ファイルをここにドロップするか、下のボタンから選択してください。</p>
                    <button class="btn btn-outline" type="button" id="fs-b64write-select"
                      data-i18n="filesystem.actions.b64write.selectButton">ファイルを選択</button>
                    <p class="fs-b64write-filename" data-fs-b64write-filename
                      data-i18n="filesystem.actions.b64write.noFile">ファイルがまだ選択されていません。</p>
                  </div>
                  <div class="card-actions fs-b64write-upload-actions">
                    <input id="fs-b64write-path" type="hidden" placeholder="" disabled
                      data-i18n-placeholder="filesystem.actions.b64write.pathPlaceholder" />
                    <button class="btn btn-primary" id="fs-b64write-upload" disabled
                      data-i18n="filesystem.actions.b64write.uploadButton">ファイルを送信</button>
                  </div>
                </div>
              </div>

              <div class="fs-detail-section" data-fs-action-section="delete" hidden>
                <h4 data-i18n="filesystem.actions.delete.title">選択項目を削除 (fs rm)</h4>
                <p class="fs-hint" data-i18n="filesystem.actions.delete.hint">
                  選択中のファイルまたはディレクトリを削除します。操作は取り消せません。
                </p>
                <p class="fs-hint fs-hint--warning" data-fs-delete-warning hidden
                  data-i18n="filesystem.actions.delete.warningNonEmpty">
                  ディレクトリ内のファイルまたはフォルダを先に削除してください。
                </p>
                <div class="card-actions">
                  <button class="btn btn-danger" id="fs-delete-run" disabled
                    data-i18n="filesystem.actions.delete.action">fs rm を送信</button>
                </div>
              </div>
            </article>
          </div>
        </div>
        <div class="tab-content" id="tab-peripherals" role="tabpanel">
          <header class="tab-header">
            <h2 data-i18n="sections.peripherals.title">ペリフェラルコマンド</h2>
            <p data-i18n="sections.peripherals.description">
              I2C / GPIO / ADC / PWM / RGB LED の制御を行います。
            </p>
          </header>

          <div class="command-layout">
            <div class="command-tablist" role="tablist" aria-label="ペリフェラルコマンド"
              data-i18n-aria-label="peripherals.tablist">
              <button id="tab-peripherals-settings" class="command-tab is-active" role="tab" aria-selected="true"
                data-command="peripherals-settings" aria-controls="command-peripherals-settings"
                data-i18n="peripherals.tabs.settings">設定</button>
              <button id="tab-peripherals-gpio" class="command-tab" role="tab" aria-selected="false"
                data-command="peripherals-gpio" aria-controls="command-peripherals-gpio"
                data-i18n="peripherals.tabs.gpio">GPIO</button>
              <button id="tab-peripherals-adc" class="command-tab" role="tab" aria-selected="false"
                data-command="peripherals-adc" aria-controls="command-peripherals-adc" data-i18n="peripherals.tabs.adc">
                ADC</button>
              <button id="tab-peripherals-pwm" class="command-tab" role="tab" aria-selected="false"
                data-command="peripherals-pwm" aria-controls="command-peripherals-pwm" data-i18n="peripherals.tabs.pwm">
                PWM</button>
              <button id="tab-peripherals-servo" class="command-tab" role="tab" aria-selected="false"
                data-command="peripherals-servo" aria-controls="command-peripherals-servo"
                data-i18n="peripherals.tabs.servo">サーボ</button>
              <button id="tab-peripherals-rgb" class="command-tab" role="tab" aria-selected="false"
                data-command="peripherals-rgb" aria-controls="command-peripherals-rgb"
                data-i18n="peripherals.tabs.rgb">RGB LED</button>
              <button id="tab-peripherals-i2c" class="command-tab" role="tab" aria-selected="false"
                data-command="peripherals-i2c" aria-controls="command-peripherals-i2c"
                data-i18n="peripherals.tabs.i2c">I2C</button>
            </div>

            <article class="card command-panel is-active" id="command-peripherals-settings"
              data-command="peripherals-settings" role="tabpanel" aria-labelledby="tab-peripherals-settings">
              <h3 data-i18n="peripherals.groups.settings.title">GPIO 設定ビュー</h3>
              <p data-i18n="peripherals.groups.settings.description">gpio pins の結果を可視化し、許可済みピンや別名を確認します。</p>
              <div class="peripherals-settings-grid">
                <section class="peripherals-card">
                  <h4 data-i18n="peripherals.groups.settings.modeHeading">アクセスモード</h4>
                  <p class="peripherals-placeholder" data-i18n="peripherals.groups.settings.modePlaceholder"
                    data-gpio-mode-placeholder>
                    接続後に gpio pins を実行するとここにモードが表示されます。
                  </p>
                  <p class="peripherals-value" data-gpio-mode-value hidden></p>
                  <p class="peripherals-meta" data-gpio-updated hidden></p>
                  <div class="card-actions">
                    <button class="btn btn-outline" type="button" id="gpio-pins-refresh" disabled
                      data-i18n="peripherals.actions.gpioPins">
                      gpio pins を送信
                    </button>
                  </div>
                </section>
                <section class="peripherals-card">
                  <h4 data-i18n="peripherals.groups.settings.allowedHeading">許可済みピン</h4>
                  <p class="peripherals-placeholder" data-i18n="peripherals.groups.settings.allowedPlaceholder"
                    data-gpio-allowed-placeholder>
                    制限モードでは許可済みピンの一覧が表示されます。
                  </p>
                  <div class="peripherals-chip-list" data-gpio-allowed-list hidden></div>
                </section>
                <section class="peripherals-card">
                  <h4 data-i18n="peripherals.groups.settings.aliasHeading">別名一覧</h4>
                  <p class="peripherals-placeholder" data-i18n="peripherals.groups.settings.aliasPlaceholder"
                    data-gpio-alias-placeholder>
                    ピンへ別名を付けるとここに表示されます。
                  </p>
                  <div class="peripherals-alias-list" data-gpio-alias-list hidden></div>
                </section>
              </div>
            </article>

            <article class="card command-panel" id="command-peripherals-gpio" data-command="peripherals-gpio"
              role="tabpanel" aria-labelledby="tab-peripherals-gpio">
              <h3 data-i18n="peripherals.groups.gpio.title">GPIO 操作</h3>
              <p data-i18n="peripherals.groups.gpio.description">GPIO のモード切り替えと入出力制御をまとめています。</p>
              <div class="peripherals-grid">
                <section class="peripherals-card" id="command-peripherals-gpio-mode">
                  <h4>gpio mode &lt;pin&gt; &lt;mode&gt;</h4>
                  <p data-i18n="peripherals.commands.gpio-mode.description">GPIO の入出力設定を変更します。</p>
                  <div class="dual-field">
                    <div class="form-field">
                      <label for="gpio-mode-pin" data-i18n="peripherals.labels.pin">ピン</label>
                      <select id="gpio-mode-pin" disabled data-pin-select="true"
                        data-pin-placeholder="peripherals.placeholders.pin">
                        <option value="" data-placeholder="true" disabled selected></option>
                      </select>
                    </div>
                    <div class="form-field">
                      <label for="gpio-mode-select" data-i18n="peripherals.labels.mode">モード</label>
                      <select id="gpio-mode-select" disabled>
                        <option value="input" data-i18n="peripherals.options.gpioMode.input">input</option>
                        <option value="output" data-i18n="peripherals.options.gpioMode.output">output</option>
                        <option value="input_pullup" data-i18n="peripherals.options.gpioMode.input_pullup">input_pullup
                        </option>
                        <option value="input_pulldown" data-i18n="peripherals.options.gpioMode.input_pulldown">
                          input_pulldown</option>
                      </select>
                    </div>
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-primary" disabled data-i18n="peripherals.actions.gpioMode">gpio mode
                      を送信</button>
                  </div>
                </section>
                <section class="peripherals-card" id="command-peripherals-gpio-read">
                  <h4>gpio read &lt;pin&gt;</h4>
                  <p data-i18n="peripherals.commands.gpio-read.description">入力ピンの状態を読み取ります。</p>
                  <div class="form-field">
                    <label for="gpio-read-pin" data-i18n="peripherals.labels.pin">ピン</label>
                    <select id="gpio-read-pin" disabled data-pin-select="true"
                      data-pin-placeholder="peripherals.placeholders.pin">
                      <option value="" data-placeholder="true" disabled selected></option>
                    </select>
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-outline" disabled data-i18n="peripherals.actions.gpioRead">gpio read
                      を送信</button>
                  </div>
                </section>
                <section class="peripherals-card" id="command-peripherals-gpio-write">
                  <h4>gpio write &lt;pin&gt; &lt;value&gt;</h4>
                  <p data-i18n="peripherals.commands.gpio-write.description">出力ピンを HIGH/LOW に設定します。</p>
                  <div class="dual-field">
                    <div class="form-field">
                      <label for="gpio-write-pin" data-i18n="peripherals.labels.pin">ピン</label>
                      <select id="gpio-write-pin" disabled data-pin-select="true"
                        data-pin-placeholder="peripherals.placeholders.pin">
                        <option value="" data-placeholder="true" disabled selected></option>
                      </select>
                    </div>
                    <div class="form-field">
                      <label for="gpio-write-value" data-i18n="peripherals.labels.value">値</label>
                      <select id="gpio-write-value" disabled>
                        <option value="HIGH" data-i18n="peripherals.options.gpioValue.HIGH">HIGH</option>
                        <option value="LOW" data-i18n="peripherals.options.gpioValue.LOW">LOW</option>
                      </select>
                    </div>
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-primary" disabled data-i18n="peripherals.actions.gpioWrite">gpio write
                      を送信</button>
                  </div>
                </section>
                <section class="peripherals-card" id="command-peripherals-gpio-toggle">
                  <h4>gpio toggle &lt;pin&gt;</h4>
                  <p data-i18n="peripherals.commands.gpio-toggle.description">出力ピンの状態をトグルします。</p>
                  <div class="form-field">
                    <label for="gpio-toggle-pin" data-i18n="peripherals.labels.pin">ピン</label>
                    <select id="gpio-toggle-pin" disabled data-pin-select="true"
                      data-pin-placeholder="peripherals.placeholders.pin">
                      <option value="" data-placeholder="true" disabled selected></option>
                    </select>
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-primary" disabled data-i18n="peripherals.actions.gpioToggle">gpio toggle
                      を送信</button>
                  </div>
                </section>
              </div>
            </article>

            <article class="card command-panel" id="command-peripherals-adc" data-command="peripherals-adc"
              role="tabpanel" aria-labelledby="tab-peripherals-adc">
              <h3 data-i18n="peripherals.groups.adc.title">ADC 測定</h3>
              <p data-i18n="peripherals.groups.adc.description">ADC チャンネルのサンプリングを行います。</p>
              <div class="peripherals-grid">
                <section class="peripherals-card" id="command-peripherals-adc-read">
                  <h4>adc read &lt;channel&gt;</h4>
                  <p data-i18n="peripherals.commands.adc-read.description">ADC チャンネルをサンプリングします。</p>
                  <div class="dual-field">
                    <div class="form-field">
                      <label for="adc-channel" data-i18n="peripherals.labels.channel">チャネル</label>
                      <input id="adc-channel" type="number" placeholder="例: 34" disabled
                        data-i18n-placeholder="peripherals.placeholders.channel" />
                    </div>
                    <div class="form-field">
                      <label for="adc-average" data-i18n="peripherals.labels.average">平均回数</label>
                      <input id="adc-average" type="number" placeholder="例: 8" disabled
                        data-i18n-placeholder="peripherals.placeholders.average" />
                    </div>
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-outline" disabled data-i18n="peripherals.actions.adcRead">adc read
                      を送信</button>
                  </div>
                </section>
              </div>
            </article>

            <article class="card command-panel" id="command-peripherals-pwm" data-command="peripherals-pwm"
              role="tabpanel" aria-labelledby="tab-peripherals-pwm">
              <h3 data-i18n="peripherals.groups.pwm.title">PWM 制御</h3>
              <p data-i18n="peripherals.groups.pwm.description">LEDC PWM の出力設定と停止をまとめています。</p>
              <div class="peripherals-grid">
                <section class="peripherals-card" id="command-peripherals-pwm-set">
                  <h4>pwm set &lt;pin&gt; &lt;freq&gt; &lt;duty&gt;</h4>
                  <p data-i18n="peripherals.commands.pwm-set.description">LEDC PWM 信号を設定します（12bit、duty は 0-4095 または %）。
                  </p>
                  <div class="dual-field">
                    <div class="form-field">
                      <label for="pwm-pin" data-i18n="peripherals.labels.pin">ピン</label>
                      <select id="pwm-pin" disabled data-pin-select="true"
                        data-pin-placeholder="peripherals.placeholders.pin">
                        <option value="" data-placeholder="true" disabled selected></option>
                      </select>
                    </div>
                    <div class="form-field">
                      <label for="pwm-freq" data-i18n="peripherals.labels.frequency">周波数 (Hz)</label>
                      <input id="pwm-freq" type="number" placeholder="例: 5000" disabled
                        data-i18n-placeholder="peripherals.placeholders.frequency" />
                    </div>
                  </div>
                  <div class="form-field">
                    <label for="pwm-duty" data-i18n="peripherals.labels.duty">デューティ (0-4095 または %)</label>
                    <input id="pwm-duty" type="text" placeholder="例: 2048 または 50%" disabled
                      data-i18n-placeholder="peripherals.placeholders.duty" />
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-primary" disabled data-i18n="peripherals.actions.pwmSet">pwm set を送信</button>
                  </div>
                </section>
                <section class="peripherals-card" id="command-peripherals-pwm-stop">
                  <h4>pwm stop &lt;pin&gt;</h4>
                  <p data-i18n="peripherals.commands.pwm-stop.description">指定ピンの PWM を停止します。</p>
                  <div class="form-field">
                    <label for="pwm-stop-pin" data-i18n="peripherals.labels.pin">ピン</label>
                    <select id="pwm-stop-pin" disabled data-pin-select="true"
                      data-pin-placeholder="peripherals.placeholders.pin">
                      <option value="" data-placeholder="true" disabled selected></option>
                    </select>
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-primary" disabled data-i18n="peripherals.actions.pwmStop">pwm stop
                      を送信</button>
                  </div>
                </section>
              </div>
            </article>

            <article class="card command-panel" id="command-peripherals-servo" data-command="peripherals-servo"
              role="tabpanel" aria-labelledby="tab-peripherals-servo">
              <h3 data-i18n="peripherals.groups.servo.title">サーボ制御</h3>
              <p data-i18n="peripherals.groups.servo.description">PWM ベースのサーボ操作向けに角度指定フォームを用意しています。</p>
              <div class="peripherals-grid">
                <section class="peripherals-card" id="command-peripherals-servo-set">
                  <h4 data-i18n="peripherals.groups.servo.setHeading">角度を設定 (pwm set)</h4>
                  <p data-i18n="peripherals.groups.servo.setDescription">ピンと角度を指定してサーボを駆動します。</p>
                  <div class="dual-field">
                    <div class="form-field">
                      <label for="servo-pin" data-i18n="peripherals.labels.pin">ピン</label>
                      <select id="servo-pin" disabled data-pin-select="true"
                        data-pin-placeholder="peripherals.placeholders.pin">
                        <option value="" data-placeholder="true" disabled selected></option>
                      </select>
                    </div>
                    <div class="form-field">
                      <label for="servo-angle" data-i18n="peripherals.labels.angle">角度 (0-180)</label>
                      <input id="servo-angle" type="number" placeholder="90" disabled
                        data-i18n-placeholder="peripherals.placeholders.angle" />
                    </div>
                  </div>
                  <div class="dual-field">
                    <div class="form-field">
                      <label for="servo-pulse-min" data-i18n="peripherals.labels.pulseMin">最小パルス (μs)</label>
                      <input id="servo-pulse-min" type="number" placeholder="500" disabled
                        data-i18n-placeholder="peripherals.placeholders.pulseMin" />
                    </div>
                    <div class="form-field">
                      <label for="servo-pulse-max" data-i18n="peripherals.labels.pulseMax">最大パルス (μs)</label>
                      <input id="servo-pulse-max" type="number" placeholder="2400" disabled
                        data-i18n-placeholder="peripherals.placeholders.pulseMax" />
                    </div>
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-primary" disabled data-i18n="peripherals.actions.pwmSet">pwm set を送信</button>
                  </div>
                </section>
                <section class="peripherals-card" id="command-peripherals-servo-stop">
                  <h4 data-i18n="peripherals.groups.servo.stopHeading">サーボを停止 (pwm stop)</h4>
                  <p data-i18n="peripherals.groups.servo.stopDescription">サーボ駆動を停止して出力を無効化します。</p>
                  <div class="form-field">
                    <label for="servo-stop-pin" data-i18n="peripherals.labels.pin">ピン</label>
                    <select id="servo-stop-pin" disabled data-pin-select="true"
                      data-pin-placeholder="peripherals.placeholders.pin">
                      <option value="" data-placeholder="true" disabled selected></option>
                    </select>
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-primary" disabled data-i18n="peripherals.actions.pwmStop">pwm stop
                      を送信</button>
                  </div>
                </section>
              </div>
            </article>

            <article class="card command-panel" id="command-peripherals-rgb" data-command="peripherals-rgb"
              role="tabpanel" aria-labelledby="tab-peripherals-rgb">
              <h3 data-i18n="peripherals.groups.rgb.title">RGB LED</h3>
              <p data-i18n="peripherals.groups.rgb.description">RGB LED のピン設定とカラー制御、ストリーム送信をまとめています。</p>
              <div class="peripherals-grid">
                <section class="peripherals-card" id="command-peripherals-rgb-pin">
                  <h4>rgb pin &lt;pin&gt;</h4>
                  <p data-i18n="peripherals.commands.rgb-pin.description">デフォルトの RGB LED 出力ピンを設定します。</p>
                  <div class="form-field">
                    <label for="rgb-pin-input" data-i18n="peripherals.labels.pin">ピン</label>
                    <select id="rgb-pin-input" disabled data-pin-select="true"
                      data-pin-placeholder="peripherals.placeholders.pin">
                      <option value="" data-placeholder="true" disabled selected></option>
                    </select>
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-primary" disabled data-i18n="peripherals.actions.rgbPin">rgb pin を送信</button>
                  </div>
                </section>
                <section class="peripherals-card" id="command-peripherals-rgb-set">
                  <h4>rgb set &lt;r&gt; &lt;g&gt; &lt;b&gt;</h4>
                  <p data-i18n="peripherals.commands.rgb-set.description">単色で RGB LED を発光させます。</p>
                  <div class="dual-field">
                    <div class="form-field">
                      <label for="rgb-set-r" data-i18n="peripherals.labels.red">R (0-255)</label>
                      <input id="rgb-set-r" type="number" placeholder="例: 255" disabled
                        data-i18n-placeholder="peripherals.placeholders.red" />
                    </div>
                    <div class="form-field">
                      <label for="rgb-set-g" data-i18n="peripherals.labels.green">G (0-255)</label>
                      <input id="rgb-set-g" type="number" placeholder="例: 128" disabled
                        data-i18n-placeholder="peripherals.placeholders.green" />
                    </div>
                  </div>
                  <div class="form-field">
                    <label for="rgb-set-b" data-i18n="peripherals.labels.blue">B (0-255)</label>
                    <input id="rgb-set-b" type="number" placeholder="例: 64" disabled
                      data-i18n-placeholder="peripherals.placeholders.blue" />
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-primary" disabled data-i18n="peripherals.actions.rgbSet">rgb set を送信</button>
                  </div>
                </section>
                <section class="peripherals-card" id="command-peripherals-rgb-stream">
                  <h4>rgb stream</h4>
                  <p data-i18n="peripherals.commands.rgb-stream.description">連続した RGB データをストリーミングし、アニメーションを表示します。</p>
                  <div class="console-area console-area--light">
                    <span data-i18n="peripherals.notes.stream">チャンク送信の進捗やエラーを表示予定</span>
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-primary" disabled data-i18n="peripherals.actions.rgbStreamStart">rgb stream
                      を開始</button>
                  </div>
                </section>
              </div>
            </article>

            <article class="card command-panel" id="command-peripherals-i2c" data-command="peripherals-i2c"
              role="tabpanel" aria-labelledby="tab-peripherals-i2c">
              <h3 data-i18n="peripherals.groups.i2c.title">I2C 操作</h3>
              <p data-i18n="peripherals.groups.i2c.description">I2C バスのスキャン、読み取り、書き込みをまとめています。</p>
              <div class="peripherals-grid">
                <section class="peripherals-card" id="command-peripherals-i2c-scan">
                  <h4>i2c scan</h4>
                  <p data-i18n="peripherals.commands.i2c-scan.description">指定した I2C バス上の応答アドレスをスキャンします。</p>
                  <div class="form-field">
                    <label for="i2c-scan-bus" data-i18n="peripherals.common.busLabel">バス</label>
                    <select id="i2c-scan-bus" disabled>
                      <option>Wire</option>
                      <option>Wire1</option>
                    </select>
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-outline" disabled data-i18n="peripherals.actions.scan">i2c scan を送信</button>
                  </div>
                </section>
                <section class="peripherals-card" id="command-peripherals-i2c-read">
                  <h4>i2c read &lt;addr&gt; [len]</h4>
                  <p data-i18n="peripherals.commands.i2c-read.description">指定アドレスからデータを読み取ります。</p>
                  <div class="dual-field">
                    <div class="form-field">
                      <label for="i2c-read-bus" data-i18n="peripherals.common.busLabel">バス</label>
                      <select id="i2c-read-bus" disabled>
                        <option>Wire</option>
                        <option>Wire1</option>
                      </select>
                    </div>
                    <div class="form-field">
                      <label for="i2c-read-address" data-i18n="peripherals.labels.address">アドレス</label>
                      <input id="i2c-read-address" type="text" placeholder="0x3C" disabled
                        data-i18n-placeholder="peripherals.placeholders.address" />
                    </div>
                  </div>
                  <div class="form-field">
                    <label for="i2c-read-length" data-i18n="peripherals.labels.length">読み取りバイト数</label>
                    <input id="i2c-read-length" type="number" placeholder="例: 16" disabled
                      data-i18n-placeholder="peripherals.placeholders.length" />
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-outline" disabled data-i18n="peripherals.actions.read">i2c read を送信</button>
                  </div>
                </section>
                <section class="peripherals-card" id="command-peripherals-i2c-write">
                  <h4>i2c write &lt;addr&gt; &lt;bytes...&gt;</h4>
                  <p data-i18n="peripherals.commands.i2c-write.description">バイト列をデバイスへ送信します。</p>
                  <div class="dual-field">
                    <div class="form-field">
                      <label for="i2c-write-bus" data-i18n="peripherals.common.busLabel">バス</label>
                      <select id="i2c-write-bus" disabled>
                        <option>Wire</option>
                        <option>Wire1</option>
                      </select>
                    </div>
                    <div class="form-field">
                      <label for="i2c-write-address" data-i18n="peripherals.labels.address">アドレス</label>
                      <input id="i2c-write-address" type="text" placeholder="0x3C" disabled
                        data-i18n-placeholder="peripherals.placeholders.address" />
                    </div>
                  </div>
                  <div class="form-field">
                    <label for="i2c-write-bytes" data-i18n="peripherals.labels.payload">送信バイト列</label>
                    <input id="i2c-write-bytes" type="text" placeholder="例: 0x00 0x01 0x02" disabled
                      data-i18n-placeholder="peripherals.placeholders.payload" />
                  </div>
                  <div class="card-actions">
                    <button class="btn btn-primary" disabled data-i18n="peripherals.actions.write">i2c write
                      を送信</button>
                  </div>
                </section>
              </div>
            </article>
          </div>
        </div>
        <div class="tab-content" id="tab-help" role="tabpanel">
          <header class="tab-header">
            <h2 data-i18n="sections.help.title">ヘルプとログ</h2>
            <p data-i18n="sections.help.description">
              コマンド一覧の参照や応答ログの確認に利用します。
            </p>
          </header>

          <div class="command-layout">
            <div class="command-tablist" role="tablist" aria-label="ヘルプコマンド" data-i18n-aria-label="help.tabsLabel">
              <button id="tab-help-help" class="command-tab is-active" role="tab" aria-selected="true"
                data-command="help" aria-controls="command-help-help">help</button>
              <button id="tab-help-log" class="command-tab" role="tab" aria-selected="false" data-command="log"
                aria-controls="command-help-log">log</button>
              <button id="tab-help-docs" class="command-tab" role="tab" aria-selected="false" data-command="docs"
                aria-controls="command-help-docs">docs</button>
            </div>

            <article class="card command-panel is-active" id="command-help-help" data-command="help" role="tabpanel"
              aria-labelledby="tab-help-help">
              <h3>help</h3>
              <p data-i18n="commands.help.help.description">
                登録されているコマンドと説明を表示します。
              </p>
              <div class="card-actions">
                <button class="btn btn-outline" data-i18n="commands.help.help.action">help を送信</button>
              </div>
              <div class="console-area console-area--light">
                <pre class="console-output" data-help-output
                  data-i18n="commands.help.help.placeholder">コマンド一覧がここに表示されます</pre>
              </div>
            </article>

            <article class="card command-panel" id="command-help-question" data-command="question" role="tabpanel"
              aria-labelledby="tab-help-question">
              <h3>?</h3>
              <p data-i18n-html="commands.help.question.description">
                <code>help</code> と同一で短縮入力です。キーボード操作向け。
              </p>
              <div class="card-actions">
                <button class="btn btn-outline" data-i18n="commands.help.question.action">? を送信</button>
              </div>
            </article>

            <article class="card command-panel" id="command-help-log" data-command="log" role="tabpanel"
              aria-labelledby="tab-help-log">
              <h3 data-i18n="commands.help.log.title">Log Viewer</h3>
              <p data-i18n="commands.help.log.description">
                シリアル応答やエラーを表示するコンソール領域です。
              </p>
              <div class="console-area console-area--log" data-log-output data-has-placeholder="true">
                <span data-i18n="commands.help.log.placeholder">ESP32 からの応答ログがここに表示されます</span>
              </div>
              <div class="card-actions">
                <button class="btn btn-outline" disabled data-log-clear
                  data-i18n="commands.help.log.clear">ログをクリア</button>
                <button class="btn btn-outline" disabled data-log-save data-i18n="commands.help.log.save">ログを保存</button>
              </div>
            </article>

            <article class="card command-panel" id="command-help-docs" data-command="docs" role="tabpanel"
              aria-labelledby="tab-help-docs">
              <h3 data-i18n="commands.help.docs.title">関連ドキュメント</h3>
              <p data-i18n="commands.help.docs.description">
                操作時に参照したい資料へのショートカットです。
              </p>
              <div class="chip-row">
                <span class="chip" data-i18n="commands.help.docs.links.0">README.md</span>
                <span class="chip" data-i18n="commands.help.docs.links.1">examples/BasicCli</span>
                <span class="chip" data-i18n="commands.help.docs.links.2">ESP-IDF Docs</span>
              </div>
              <div class="card-actions">
                <button class="btn btn-outline" disabled data-i18n="commands.help.docs.action">リンクを開く</button>
              </div>
            </article>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div data-i18n-html="footer.hint">
        <strong>ヒント:</strong>
        WebSerial API は HTTPS または localhost 上でのみ利用できます。GitHub Pages
        での運用を前提にしています。
      </div>
      <div class="footer-links">
        <a href="https://developer.mozilla.org/docs/Web/API/Web_Serial_API" target="_blank" rel="noopener noreferrer">
          <span data-i18n="footer.links.webSerial">Web Serial API Docs</span>
        </a>
        <a href="https://github.com/" target="_blank" rel="noopener noreferrer">
          <span data-i18n="footer.links.githubPages">GitHub Pages</span>
        </a>
      </div>
    </footer>
  </div>

  <script src="./app.js"></script>
</body>

</html>